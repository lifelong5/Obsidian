### 平行光：

几何属性只有方向，其他属性有强度、颜色。

### 点光源：

位置：中心点的位置、方向：某点的方向、颜色、强度、衰减。

### 聚光灯：

锥形区域的半径Range、锥体张开的角度Spot Angle、位置、方向、颜色、强度、衰减。

### 面光源：

在烘培时才可以发挥作用。

### 衰减纹理：

因为处于不同的位置的衰减系数不同，如果要用函数进行计算那么在每个位置都要进行一次计算会使得非常麻烦，所有我们使用衰减纹理来获得每个位置的衰减系数。

我们在一个纹理里事先的存储衰减的系数，在进行计算的时候只需要对其进行采样即可得到衰减系数。

#### 步骤：

1. 将位置转换到光源空间下，利用_LightMatrix0进行变化。

![image-20220626201446351](C:\Users\huangxuemei\AppData\Roaming\Typora\typora-user-images\image-20220626201446351.png)

1. 使用这个位置的模的平方进行采样，避免开方操作。

![image-20220626201500207](C:\Users\huangxuemei\AppData\Roaming\Typora\typora-user-images\image-20220626201500207.png)

### 阴影：

#### ShadowMap：

在LightMode为ShadowCaster的Pass中，将摄像机的位置变换到光源的位置，利用深度测试，将离摄像机最近的深度存储在阴影映射纹理ShadowMap中。

#### 实现：

在实际渲染中，摄像机在原来的位置，获得某点的深度值，并且从shadowMap中获得该点的标准深度值，如果该点的深度值大于标准深度值，说明处于阴影中，反之则不是。

#### 宏：

###### SHADOW_COORDS():

在片元着色器输入结构体中进行定义阴影所需要的一些变量信息。

###### TRANSFER_SHADOW():

在顶点着色器中对阴影所需要的一些变量进行进行计算，并且更新在结构体中。

###### SHADOW_ATTENUATION():

在片元着色器中计算阴影。